<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets\app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:1,&quot;tests&quot;:11,&quot;passes&quot;:9,&quot;pending&quot;:0,&quot;failures&quot;:2,&quot;start&quot;:&quot;2024-07-11T16:41:59.613Z&quot;,&quot;end&quot;:&quot;2024-07-11T16:41:59.791Z&quot;,&quot;duration&quot;:178,&quot;testsRegistered&quot;:11,&quot;passPercent&quot;:81.81818181818183,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;1521a695-8dec-4c79-92ed-12bdd87447cf&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\S0nd0\\Downloads\\API\\test\\api.test.js&quot;,&quot;file&quot;:&quot;\\test\\api.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;081ba9ca-c64e-4b49-ab84-1ae49e78bd3e&quot;,&quot;title&quot;:&quot;API Tests&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\S0nd0\\Downloads\\API\\test\\api.test.js&quot;,&quot;file&quot;:&quot;\\test\\api.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should register a new user&quot;,&quot;fullTitle&quot;:&quot;API Tests should register a new user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:70,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .post(&#x27;/api/v1/users&#x27;)\n  .send({ name: &#x27;user&#x27;, email: &#x27;user@gmail.com&#x27;, password: &#x27;user123&#x27; })\n  .expect(200)\n  .expect(&#x27;Content-Type&#x27;, /json/)\n  .end((err, res) =&gt; {\n    if (err) return done(err);\n    \n    console.log(res.body); // Log the response body to debug\n    authToken = res.body.token; // Save the token to authToken\n    assert.ok(authToken); // Ensure token is returned\n    // Ensure response contains message and the correct message value\n    assert.ok(res.body.message);\n    assert.strictEqual(res.body.message, &#x27;User registered with success&#x27;);\n    done();\n    \n  });&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: The expression evaluated to a falsy value:\n\n  assert.ok(authToken)\n&quot;,&quot;estack&quot;:&quot;AssertionError [ERR_ASSERTION]: The expression evaluated to a falsy value:\n\n  assert.ok(authToken)\n\n    at Test.&lt;anonymous&gt; (test\\api.test.js:22:16)\n    at Test.assert (node_modules\\supertest\\lib\\test.js:172:8)\n    at Server.localAssert (node_modules\\supertest\\lib\\test.js:120:14)\n    at Object.onceWrapper (node:events:633:28)\n    at Server.emit (node:events:519:28)\n    at emitCloseNT (node:net:2321:8)\n    at process.processTicksAndRejections (node:internal/process/task_queues:81:21)&quot;},&quot;uuid&quot;:&quot;15ea7250-0af7-410a-894b-8b0a3c91f932&quot;,&quot;parentUUID&quot;:&quot;081ba9ca-c64e-4b49-ab84-1ae49e78bd3e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should register a duplicated new user&quot;,&quot;fullTitle&quot;:&quot;API Tests should register a duplicated new user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n.post(&#x27;/api/v1/users&#x27;)\n.send({ name: &#x27;user&#x27;, email: &#x27;user@gmail.com&#x27;, password: &#x27;user123&#x27; })\n.expect(401) // Expecting error code\n.expect(&#x27;Content-Type&#x27;, /json/)\n.end((err, res) =&gt; {\n  if (err) return done(err);\n  console.log(res.body); // Log the response body to debug\n  assert.ok(res.body.message); \n  assert.strictEqual(res.body.message, &#x27;User already registered&#x27;);\n  done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ce9104ab-a0ad-4b74-af48-cfff4f75e722&quot;,&quot;parentUUID&quot;:&quot;081ba9ca-c64e-4b49-ab84-1ae49e78bd3e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should authenticate user and return access token&quot;,&quot;fullTitle&quot;:&quot;API Tests should authenticate user and return access token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .post(&#x27;/api/v1/auth&#x27;)\n  .send({ email: &#x27;user@gmail.com&#x27;, password: &#x27;user123&#x27; })\n  .expect(200)\n  .expect(&#x27;Content-Type&#x27;, /json/)\n  .end((err, res) =&gt; {\n    if (err) return done(err);\n    assert.ok(res.body.token); // Ensure token is returned\n    authToken = res.body.token; // Save token for future authenticated requests\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a108ff3a-9409-431e-ba2f-de58212384b0&quot;,&quot;parentUUID&quot;:&quot;081ba9ca-c64e-4b49-ab84-1ae49e78bd3e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not authenticate user with invalid credentials and return an error&quot;,&quot;fullTitle&quot;:&quot;API Tests should not authenticate user with invalid credentials and return an error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .post(&#x27;/api/v1/auth&#x27;)\n  .send({ email: &#x27;invaliduser@gmail.com&#x27;, password: &#x27;wrongpassword&#x27; })\n  .expect(401) // Expecting a 401 Unauthorized status code\n  .expect(&#x27;Content-Type&#x27;, /json/)\n  .end((err, res) =&gt; {\n    if (err) return done(err);\n    assert.ok(res.body.message); // Ensure error message is returned\n    assert.strictEqual(res.body.message, &#x27;Incorrect email or password&#x27;);\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fb2f187a-1191-46b4-873c-11d39fb0efce&quot;,&quot;parentUUID&quot;:&quot;081ba9ca-c64e-4b49-ab84-1ae49e78bd3e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get user details with valid token&quot;,&quot;fullTitle&quot;:&quot;API Tests should get user details with valid token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .get(&#x27;/api/v1/users&#x27;)\n  .set(&#x27;Authorization&#x27;, authToken)\n  .expect(200)\n  .expect(&#x27;Content-Type&#x27;, /json/)\n  .end((err, res) =&gt; {\n    if (err) return done(err);\n    assert.strictEqual(res.body.name, &#x27;user&#x27;);\n    assert.strictEqual(res.body.email, &#x27;user@gmail.com&#x27;);\n    assert.strictEqual(res.body.password, &#x27;user123&#x27;);\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;96db73a9-5f86-47dc-8bf1-b6942fc4e70b&quot;,&quot;parentUUID&quot;:&quot;081ba9ca-c64e-4b49-ab84-1ae49e78bd3e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not get user details with invalid token&quot;,&quot;fullTitle&quot;:&quot;API Tests should not get user details with invalid token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .get(&#x27;/api/v1/users&#x27;)\n  .set(&#x27;Authorization&#x27;, &#x27;InvalidToken&#x27;)\n  .expect(403) \n  .expect(&#x27;Content-Type&#x27;, /json/)\n  .end((err, res) =&gt; {\n    if (err) return done(err);\n    assert.ok(res.body.message); // Ensure error message is returned\n    assert.strictEqual(res.body.message, &#x27;Unauthorized&#x27;);\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;00fa44dc-f71d-48fb-9ec6-1ad4642583f4&quot;,&quot;parentUUID&quot;:&quot;081ba9ca-c64e-4b49-ab84-1ae49e78bd3e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update user details with valid token&quot;,&quot;fullTitle&quot;:&quot;API Tests should update user details with valid token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .patch(&#x27;/api/v1/users&#x27;)\n  .set(&#x27;Authorization&#x27;, authToken)\n  .send({ name: &#x27;newName&#x27;, email: &#x27;new_email@gmail.com&#x27;, password: &#x27;newpassword123&#x27; })\n  .expect(200)\n  .expect(&#x27;Content-Type&#x27;, /json/)\n  .end((err, res) =&gt; {\n    if (err) return done(err);\n    assert.strictEqual(res.body.message, &#x27;User updated with success!&#x27;);\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fef7ad7e-26c1-42f5-b1e8-4137023320a9&quot;,&quot;parentUUID&quot;:&quot;081ba9ca-c64e-4b49-ab84-1ae49e78bd3e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not update user details with invalid token&quot;,&quot;fullTitle&quot;:&quot;API Tests should not update user details with invalid token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .patch(&#x27;/api/v1/users&#x27;)\n  .set(&#x27;Authorization&#x27;, &#x27;InvalidToken&#x27;)\n  .send({ name: &#x27;newName&#x27;, email: &#x27;new_email@gmail.com&#x27;, password: &#x27;newpassword123&#x27; })\n  .expect(403)\n  .expect(&#x27;Content-Type&#x27;, /json/)\n  .end((err, res) =&gt; {\n    if (err) return done(err);\n    assert.ok(res.body.message); // Ensure error message is returned\n    assert.strictEqual(res.body.message, &#x27;jwt malformed&#x27;);\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;796472ef-7181-4f8d-98ee-b3db039a5b99&quot;,&quot;parentUUID&quot;:&quot;081ba9ca-c64e-4b49-ab84-1ae49e78bd3e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should delete user with valid token&quot;,&quot;fullTitle&quot;:&quot;API Tests should delete user with valid token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .delete(&#x27;/api/v1/users&#x27;)\n  .set(&#x27;Authorization&#x27;, authToken)\n  .expect(200)\n  .expect(&#x27;Content-Type&#x27;, /json/)\n  .end((err, res) =&gt; {\n    if (err) return done(err);\n    assert.strictEqual(res.body.message, &#x27;User deleted with success&#x27;);\n    done();\n  });&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;Error: expected 200 \&quot;OK\&quot;, got 403 \&quot;Forbidden\&quot;&quot;,&quot;estack&quot;:&quot;Error: expected 200 \&quot;OK\&quot;, got 403 \&quot;Forbidden\&quot;\n    at Context.&lt;anonymous&gt; (test\\api.test.js:178:8)\n    at process.processImmediate (node:internal/timers:478:21)\n----\n    at Test._assertStatus (node_modules\\supertest\\lib\\test.js:252:14)\n    at C:\\Users\\S0nd0\\Downloads\\API\\node_modules\\supertest\\lib\\test.js:308:13\n    at Test._assertFunction (node_modules\\supertest\\lib\\test.js:285:13)\n    at Test.assert (node_modules\\supertest\\lib\\test.js:164:23)\n    at Server.localAssert (node_modules\\supertest\\lib\\test.js:120:14)\n    at Object.onceWrapper (node:events:633:28)\n    at Server.emit (node:events:519:28)\n    at emitCloseNT (node:net:2321:8)\n    at process.processTicksAndRejections (node:internal/process/task_queues:81:21)&quot;},&quot;uuid&quot;:&quot;840f908a-0956-4999-9bfb-e7ea2908480b&quot;,&quot;parentUUID&quot;:&quot;081ba9ca-c64e-4b49-ab84-1ae49e78bd3e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should delete all users with admin key&quot;,&quot;fullTitle&quot;:&quot;API Tests should delete all users with admin key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .delete(&#x27;/api/v1/all-users&#x27;)\n  .send({ key_admin: &#x27;keyadmin123&#x27; })\n  .expect(200)\n  .expect(&#x27;Content-Type&#x27;, /json/)\n  .end((err, res) =&gt; {\n    if (err) return done(err);\n    assert.strictEqual(res.body.message, &#x27;Users deleted with success&#x27;);\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f6bf5e0a-7cc3-44a1-a632-faf1da72351c&quot;,&quot;parentUUID&quot;:&quot;081ba9ca-c64e-4b49-ab84-1ae49e78bd3e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 403 for unauthorized access to /all-users&quot;,&quot;fullTitle&quot;:&quot;API Tests should return 403 for unauthorized access to /all-users&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .delete(&#x27;/api/v1/all-users&#x27;)\n  .send({ key_admin: &#x27;dg&#x27; })\n  .expect(403)\n  .end((err, res) =&gt; {\n    if (err) return done(err);\n    assert.strictEqual(res.body.message, &#x27;Unauthorized access&#x27;);\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7bcd43c0-2e25-47c1-b673-769ce3a29307&quot;,&quot;parentUUID&quot;:&quot;081ba9ca-c64e-4b49-ab84-1ae49e78bd3e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ce9104ab-a0ad-4b74-af48-cfff4f75e722&quot;,&quot;a108ff3a-9409-431e-ba2f-de58212384b0&quot;,&quot;fb2f187a-1191-46b4-873c-11d39fb0efce&quot;,&quot;96db73a9-5f86-47dc-8bf1-b6942fc4e70b&quot;,&quot;00fa44dc-f71d-48fb-9ec6-1ad4642583f4&quot;,&quot;fef7ad7e-26c1-42f5-b1e8-4137023320a9&quot;,&quot;796472ef-7181-4f8d-98ee-b3db039a5b99&quot;,&quot;f6bf5e0a-7cc3-44a1-a632-faf1da72351c&quot;,&quot;7bcd43c0-2e25-47c1-b673-769ce3a29307&quot;],&quot;failures&quot;:[&quot;15ea7250-0af7-410a-894b-8b0a3c91f932&quot;,&quot;840f908a-0956-4999-9bfb-e7ea2908480b&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:158,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;10.6.0&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;7.1.3&quot;},&quot;marge&quot;:{&quot;version&quot;:&quot;6.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;API&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-report\\assets&quot;,&quot;jsonFile&quot;:&quot;C:\\Users\\S0nd0\\Downloads\\API\\mochawesome-report\\mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;C:\\Users\\S0nd0\\Downloads\\API\\mochawesome-report\\mochawesome.html&quot;}"><div id="report"></div><script src="assets\app.js"></script></body></html>